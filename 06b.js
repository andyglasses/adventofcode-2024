async function run(){
    let input = getInput().trim().split('\n').map(function(x) { return x.trim().split('').map(y => y.trim()); });
    let yLength = input.length;
    let xLength = input[0].length;
    const grid = [];
    let guardStart = {
        x: -1,
        y: -1,
        moveX: 0,
        moveY: 0
    }
    for(let y =0; y < yLength; y++){
        let row = input[y];
        let rowObj = [];
        for(let x = 0; x < xLength; x++){
            let cell = row[x];
            let obj = { blocked: false, x: x, y:y, traveled: [], loopSpot: false, startingRoute: false, tempBlocked: false }
            if(cell == '#'){
                obj.blocked = true;
            } else if(cell == '^' ){
                guardStart.x = x;
                guardStart.y = y;
                guardStart.moveX = 0;
                guardStart.moveY = -1;
            }else if(cell == '>' ){
                guardStart.x = x;
                guardStart.y = y;
                guardStart.moveX = 1;
                guardStart.moveY = 0;
            }else if(cell == '<' ){
                guardStart.x = x;
                guardStart.y = y;
                guardStart.moveX = -1;
                guardStart.moveY = 0;
            }else if(cell == 'v' ){
                guardStart.x = x;
                guardStart.y = y;
                guardStart.moveX = 0;
                guardStart.moveY = 1;
            }
            rowObj.push(obj);
        }
        grid.push(rowObj);
    }

    let guard = {...guardStart};
    computeRoute(guard, grid, xLength, yLength);
    for(let y = 0; y < yLength; y++){
        for(let x = 0; x <  xLength; x++){
            if(grid[y][x].traveled.length > 0){
                grid[y][x].startingRoute = true;
            }
        }
    }

    for(let y = 0; y < yLength; y++){
        for(let x = 0; x <  xLength; x++){
            if((!grid[y][x].startingRoute) || (y == guardStart.y && x == guardStart.x)){
                continue;
            }
            guard = {...guardStart};
            grid[y][x].tempBlocked = true;
            computeRoute(guard, grid, xLength, yLength);
            if(inside(guard.x, guard.y, xLength, yLength)){
                // inside means loop                
                grid[y][x].loopSpot = true;
            }
            grid[y][x].tempBlocked = false;
        }
    }
    draw(grid, xLength, yLength, guard.x, guard.y);
  }

  function computeRoute(guard, grid, xLength, yLength){
    reset(grid, xLength, yLength)
    while(inside(guard.x, guard.y, xLength, yLength)){
        if(grid[guard.y][guard.x].traveled.some(s => s.moveX == guard.moveX && s.moveY == guard.moveY)){
            // loop found
            guard.x += guard.moveX;
            guard.y += guard.moveY;
            break;
        }

        grid[guard.y][guard.x].traveled.push({ moveX: guard.moveX, moveY: guard.moveY});


        let nextCellInside = inside(guard.x + guard.moveX, guard.y + guard.moveY, xLength, yLength);
        if(!nextCellInside){
            // left the grid
            guard.x += guard.moveX;
            guard.y += guard.moveY;
            break;
        }

        let nextCell = grid[guard.y + guard.moveY][guard.x + guard.moveX];

        if(nextCell.blocked || nextCell.tempBlocked){
            if(guard.moveY == -1){
                guard.moveY = 0;
                guard.moveX = 1;
            } else if(guard.moveY == 1){
                guard.moveY = 0;
                guard.moveX = -1;
            } else if(guard.moveX == -1){
                guard.moveY = -1;
                guard.moveX = 0;
            } else {
                guard.moveY = 1;
                guard.moveX = 0;
            }
        } else {
            guard.x += guard.moveX;
            guard.y += guard.moveY;
        }
    }
  }

  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  function reset(grid, xLength, yLength){
    for(let y = 0; y < yLength; y++){
        for(let x = 0; x <  xLength; x++){
            grid[y][x].traveled = [];
        }
    }
  }

  function draw(grid, xLength, yLength, guardX, guardY){
    console.clear();
    let traveledCount = 0;
    let loopCount = 0;
    for(let y = 0; y < yLength; y++){
        let row = '';
        for(let x = 0; x <  xLength; x++){
            if(grid[y][x].loopSpot){
                loopCount++;
            }
            if(grid[y][x].blocked){
                row = row + '#'
            } else if(grid[y][x].tempBlocked){
                row = row + '@'
            } else if(grid[y][x].loopSpot) {
                row = row + 'O'
           }  else if(grid[y][x].traveled.length > 0) {
                row = row + 'X'
                traveledCount++;
            } else if(x == guardX && y == guardY){
                row = row + 'G'
            } else {
                row = row + '.';
            }
        }
        console.log(row);
    }
    console.log('traveled', traveledCount)
    console.log('loopCount', loopCount)
  }

  function inside(guardX, guardY, xLength, yLength){
    return guardX >= 0 && guardX < xLength && guardY >= 0 && guardY < yLength;
  }
  
  function getInput(){
  /*  return `....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#...`;*/
    return `...#..................#...................#......................#..............................#.............................#...
....#.......................#........#.#..............##...........#.....#..........#..........................#..................
.............#........................................................................#.........#.#..#..#..........#..............
..........#.......#..........#..................#........##...................#..............#....................................
....................#..........................................................#..#.....................................#.........
....#............................#..............................................#.....................#..........##....#..........
.......#.............#......................................................................#.............#.........#.............
....###......................#....#...........#.....#................................#..........................#.................
..........#..#...........#..#........................................................#.....#...........#................#.........
..#....#......#....#....#...................................................................#.....................................
....................#............#............................................#......#....#...............................#.......
..........#.......#.........#.......#.............................................................................................
.......#...#.......................................#...................#..........................................................
.......#........#............................#.....#.......#..............................................#..................#...#
.....................#.................................#................#...#...............#.....#.#..........................#..
.....#..........................................#......................#.............##..............................#........#...
.....#......#.........................#..........................#..........................................................#..#..
.#......#.............#......#.................................................#.....#...................##......#................
.............................................................................##...................................................
........................................#.......................................#........#.............................#.#.......#
...........#.....................................#.............................#......#......#..#....................#..#.........
.............................................#.......................#..................##....#.....#.............................
........................#..............................................................#..........................................
#..............#.........................#........#...#...............#..............#..................#....................##...
...#...#.............................#.......#................................................#........................#....#.....
.....#.........................#..#.......................#..........#.....................#..................#.#.....#...........
..................#........#..#.......#...................................................................................#....#..
..#...#...............................................#.#..#........................................................#....#......#.
...............#...............#..........................#............................#..........#.............#.................
............#.....#........#.........................................................#........#........#.....#........#......#....
............................#.........#....#........#.....#...#.............#.................................#...................
........#..................#....#..........................................................#.#.#..................................
....................................................................................................................#.............
#............#.............#..................#......................................................................#............
...............................#....#..........#...........##........................................................#.........#.#
................#.........................................#.................................................#........#............
..............................................#............#................#........#........................#...................
..................#.........#..........................#.............#...............#............#....................#..........
........................#...#...............................................#..............#.....#.....................#..........
...........#.......................................#..............................#..................#....#...##..................
#...............#..................#...............................#...............................#.....................#........
.............#...............................................................##...................................................
.................#.............#.......................#...#............#.#....#................................#...........#.....
#......#......#..................................##.................#.#...............................#...........................
.#...............#..........#...............................................#...#..........#..........#...........................
.....................................#............................#....#.............................................#...#........
......#...#.............#.#....................#.........#..........##.................................#..........#..........#....
.............................#..................#....#..............##.......................#.#.....#........#...................
.................................................#.#......................................................#................#......
......................................#..........................................#......#.........................................
#....................#...........................................................#..................#.............................
.....#.........#...................................................#....#.#....#.#.........#......................................
........#..........#......#.............#................................#.....#................#.................................
...........#................................#...........#..........#......#.............#........................#................
.......#...............#....................#..#................................................#.................................
.....................#.........#..#............#..........#...........#...........#...............................#...............
................#...#........#...........#..........................................................#..#...................#......
.........................................................#.....................#...#......................#.#....................#
................#......#....#.#..............#............#.......................................................................
..........#.....................................#......................................................................#..........
#......................................#.......#.....##..#.....................#.........#.......#................................
........#...#..............#....................#................................#..............................................#.
.##............................................................................#......#................................#..........
.#........................#..............#..............................................#........#.....#.......#..................
#......................................#.....................#...................................................................#
............................#.....#.....#............#...............#...#.......#.........#......................................
.#.........................#.......................#.........#.......#.................#............................#..#..........
.............................................................................................................#........##..........
...........#...#...#.#................#.....................................#........#............................................
......#.......................#..........#.......#................................................................#...............
........#....#........#..................#....##.....#............#..............................#...........#...........#..#.....
..................................#...............................................................................#...............
.....................#.#.......................#....................................#.............................................
........................................................................................#.........#.................#.........#...
..........................#..........#....#..........................................#.......................#............#.#.....
...............................................#.#....#...............................#...................#......................#
.....#...........#........#.#.......#.............................#..................#............................................
...............#.........................................................#....................#.................#.............#...
#....................................##..........#................................................................#...............
...............#.................#...#..............#......................................................#..............#.......
...................#......#.............................................#......................................................#.#
..#.............#.......#......#....#..#..#.......................................................................................
.........#....................................................#.....................................#..............#..............
..............#..............#................................................................#.......................#...........
..........................#.................#.......................................................##...................#.#......
...............#..#...................................................................................................#.......###.
...#.....................#..#........#..........#..................................................................##.............
.................#.......................................###..............#.........................#.............................
...#.....................................................#.......#..........................#................#..#.................
...................................................#..................#.........................................................#.
.....#.............#...................#...................#.....................................#................................
.....................#.........................#......#...........................................................................
...........#...............#......#.....##...#...#.............................................#........#.#...............#...#...
..............#..............##...........#.......................#..#.^..........................................................
...................#..............................................................................................................
..................#.......#..........#.......#..................#..........#...................................#..................
..............................................................................................#..................................#
......................................................#................#......................#...................................
..............#.........#..............................#.....................#......................#.............................
#................#.........#................#.............................#......................#..#...#..............#..........
.#..#........#................#...............#..................#........#.....................#............#........#...........
.....................................................#.#.........#......................#.............................#........#..
......................#.....................#..#......#..........................#............................#......#............
......................#.........................#..#..................................#.......................#..............#....
..........................#..................#.............#......................................................#...............
..........................#....#........................................#..#...#....#.................#...........................
.......#...........#.......................#............##........#....................................................#..........
#..........................................................................#...........#..........................................
............................................................#.................#..#........................................##......
..#...............................................#....#.................................................##.....#...##.....#......
...#.....##..............................#.........................................................#............#.................
.....#....##............................#....##..........#...#....................................................................
..................................................#..........................#.........##.......#.......................#.........
.........#.....#..........#........#........................#.##..#............#.......................................#..........
.....#...............#.......#..........#.#..........#.....................#.....................................#.....#..........
....#......#............................................................................................##...#.#.#.........#......
...........#........................#.....#....................#..................#.#........#....................................
....................................................#................#.#................................................#.........
..........#..............#.......................#.................#...................................#.............#.#......##..
................##......................................................#.................#.......#.#....................#........
................#......................................................#.............##...............#.....#......#.......#......
..............................#............................#..........#...........#...............................................
.......#.............#....................................................................#..............................#.#......
...#.....................#.#...............................................................#...#..#....#..........................
....#.........##......#..............................................................................#..................#.........
....#..........................................#......#...................#........##............#................................
..#.......#......#............#........#...#.#...........................#.......#................................................
..........................#...#....................#...............#...#......#.#...#...#...............#.#.#.....................
....##.#....................................................................#...#.....##........................#.##..............
.............................................#....................................................................................`;
  }
  
  run();